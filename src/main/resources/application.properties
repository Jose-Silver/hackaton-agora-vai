# ===========================================
# CONFIGURACOES GERAIS
# ===========================================
# Perfil padrao (desenvolvimento)
quarkus.profile=dev
#BasePath para todos os endpoints REST
quarkus.http.root-path=/emprestimos

# ===========================================
# CONFIGURACOES JAXB
# ===========================================
# Excluir interfaces JAX-RS do processamento JAXB
quarkus.jaxb.exclude-classes=jakarta.ws.rs.core.HttpHeaders

# ===========================================
# CONFIGURACAO MULTI-DATASOURCE
# ===========================================

# Datasource principal (H2) - para persistir informacoes
quarkus.datasource.db-kind=h2
quarkus.datasource.username=${QUARKUS_DATASOURCE_USERNAME:sa}
quarkus.datasource.password=${QUARKUS_DATASOURCE_PASSWORD:sa}
#quarkus.datasource.jdbc.url=jdbc:h2:file:./data/h2db
quarkus.datasource.jdbc.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE

# Datasource secundaria (SQL Server) - para consultar produtos
quarkus.datasource.produtos.db-kind=mssql

# ===========================================
# CONFIGURACOES HIBERNATE/JPA
# ===========================================

# ConfiguraCAo Hibernate para H2 (entidades locais)
quarkus.hibernate-orm.datasource=<default>
quarkus.hibernate-orm.packages=emprestimos.v1.domain.entity.local
quarkus.hibernate-orm.database.generation=drop-and-create

# Configuracao Hibernate para SQL Server (entidades remotas)
quarkus.hibernate-orm.produtos.datasource=produtos
quarkus.hibernate-orm.produtos.packages=emprestimos.v1.domain.entity.remote
%dev.quarkus.hibernate-orm.produtos.database.generation=drop-and-create
%dev.quarkus.hibernate-orm.produtos.sql-load-script=import.sql

# ===========================================
# CONFIGURACOES DE CACHE
# ===========================================
# Configuracoes para cache das simulacoes
quarkus.cache.caffeine."simulacoes-por-produto".initial-capacity=100
quarkus.cache.caffeine."simulacoes-por-produto".maximum-size=1000
quarkus.cache.caffeine."simulacoes-por-produto".expire-after-write=PT30M

quarkus.cache.caffeine."simulacoes-agregadas-por-produto".initial-capacity=100
quarkus.cache.caffeine."simulacoes-agregadas-por-produto".maximum-size=1000
quarkus.cache.caffeine."simulacoes-agregadas-por-produto".expire-after-write=PT30M

# Configuracao global de cache
quarkus.cache.caffeine.expire-after-write=10m

# ===========================================
# CONFIGURACOES OPENAPI/SWAGGER
# ===========================================
quarkus.smallrye-openapi.info-title=Simulacao de Emprestimos API
quarkus.smallrye-openapi.info-version=1.0.0
quarkus.smallrye-openapi.info-description=API para simulacao de emprestimos bancarios
quarkus.smallrye-openapi.servers=http://localhost:8080,https://api.exemplo.com

# ===========================================
# CONFIGURACOES DE HEALTH CHECK
# ===========================================
quarkus.smallrye-health.ui.enable=true

# ===========================================
# CONFIGURACOES DE LOGGING
# ===========================================
quarkus.log.level=INFO
quarkus.log.category."resource".level=DEBUG
quarkus.log.category."service".level=DEBUG
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] %s%e%n
quarkus.log.file.enable=true
quarkus.log.file.path=logs/application.log
quarkus.log.file.level=DEBUG

# ===========================================
# CONFIGURACOES DE DESENVOLVIMENTO
# ===========================================
quarkus.http.port=8080
quarkus.live-reload.enabled=true

# ===========================================
# CONFIGURA??ES AZURE EVENT HUBS
# ===========================================
azure.eventhubs.connection-string=${AZURE_EVENTHUBS_CONNECTION_STRING}
azure.eventhubs.hub-name=${AZURE_EVENTHUBS_HUB_NAME:simulacoes}

# ===========================================
# CONFIGURACOES DE AUDITORIA
# ===========================================
# Habilitar auditoria automatica
auditoria.habilitada=true

# Retencao de registros de auditoria (em dias)
auditoria.retencao.dias=90

# Limpeza automatica de registros antigos
auditoria.limpeza.automatica=true

# Configuracao de cache para auditoria
quarkus.cache.caffeine."auditoria-sessoes".initial-capacity=50
quarkus.cache.caffeine."auditoria-sessoes".maximum-size=500
quarkus.cache.caffeine."auditoria-sessoes".expire-after-write=PT1H

quarkus.test.continuous-testing=disabled
quarkus.datasource.dev-ui.allow-sql=true
quarkus.dev-ui.always-include=true
quarkus.dev-ui.path=/q/dev
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui
