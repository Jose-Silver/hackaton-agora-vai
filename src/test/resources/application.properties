# Datasource principal (H2) via Dev Services
quarkus.datasource.db-kind=h2
quarkus.datasource.username=${QUARKUS_DATASOURCE_USERNAME:sa}
quarkus.datasource.password=${QUARKUS_DATASOURCE_PASSWORD:sa}
quarkus.datasource.jdbc.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
quarkus.datasource.devservices=true

# Datasource secundário (produtos) - SQL Server via Dev Services
quarkus.datasource.produtos.db-kind=mssql
quarkus.datasource.produtos.devservices.enabled=true
quarkus.datasource.produtos.devservices.image-name=mcr.microsoft.com/mssql/server:2022-latest

# Configuração Hibernate para H2 (entidades locais)
quarkus.hibernate-orm.datasource=<default>
quarkus.hibernate-orm.packages=emprestimos.v1.domain.entity.local
quarkus.hibernate-orm.database.generation=drop-and-create

# Configuração Hibernate para SQL Server (entidades remotas)
quarkus.hibernate-orm.produtos.datasource=produtos
quarkus.hibernate-orm.produtos.packages=emprestimos.v1.domain.entity.remote
quarkus.hibernate-orm.produtos.database.generation=drop-and-create
# Importa os produtos corretos para os testes (mesmo script do dev)
quarkus.hibernate-orm.produtos.sql-load-script=import.sql

# Outras configurações de teste podem ser adicionadas abaixo

# Desativa o Rate Limiting por padrão nos testes (pode ser reativado por TestProfile específico)
emprestimos.rate-limit.enabled=false
